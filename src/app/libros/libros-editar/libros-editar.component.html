<div class="card shadow rounded-4">
  <div class="card-header bg-primary text-white rounded-top-4">
    Editar Libro
  </div>

  <div class="card-body p-4">
    <form [formGroup]="formularioDeLibros" (ngSubmit)="actualizarLibro()">

      <!-- Título -->
      <div class="mb-3">
        <label class="form-label">Título:</label>
        <input
          type="text"
          class="form-control"
          formControlName="libTitulo"
          placeholder="Escribe un título"
          [ngClass]="{'is-invalid': hasErrors('libTitulo', 'required')}"
        />
        <div class="invalid-feedback" *ngIf="hasErrors('libTitulo', 'required')">
          Ingrese el título del libro.
        </div>
      </div>

      <!-- Año -->
      <div class="mb-3">
        <label class="form-label">Año:</label>
        <input
          type="text"
          class="form-control"
          formControlName="libAnio"
          placeholder="Escribe el año"
          [ngClass]="{
            'is-invalid':
              hasErrors('libAnio', 'required') ||
              hasErrors('libAnio', 'pattern') ||
              hasErrors('libAnio', 'minlength')
          }"
        />

        <div class="invalid-feedback" *ngIf="hasErrors('libAnio', 'required')">
          Ingrese el año del libro.
        </div>
        <div class="invalid-feedback" *ngIf="hasErrors('libAnio', 'minlength')">
          El año debe tener 4 números.
        </div>
        <div class="invalid-feedback" *ngIf="hasErrors('libAnio', 'pattern')">
          Sólo se permiten números.
        </div>
      </div>

      <!-- Editorial -->
      <div class="mb-3">
        <label class="form-label">Editorial:</label>
        <select
          formControlName="EditorialID"
          class="form-control"
          [ngClass]="{'is-invalid': hasErrors('EditorialID', 'required')}"
        >
          <option value="">Seleccione...</option>
          <option *ngFor="let editorial of editoriales" [value]="editorial.idEditorial">
            {{ editorial.ediNombre }}
          </option>
        </select>

        <div class="invalid-feedback" *ngIf="hasErrors('EditorialID', 'required')">
          Seleccione la editorial.
        </div>
      </div>

      <!-- Autor -->
      <div class="mb-3">
        <label class="form-label">Autor:</label>
        <select
          formControlName="autorID"
          class="form-control"
          [ngClass]="{'is-invalid': hasErrors('autorID', 'required')}"
        >
          <option value="">Seleccione...</option>
          <option *ngFor="let autor of listadoautores" [value]="autor.idAutor">
            {{ autor.autNombre }} {{ autor.autApellido }}
          </option>
        </select>

        <div class="invalid-feedback" *ngIf="hasErrors('autorID', 'required')">
          Seleccione un autor.
        </div>
      </div>

      <!-- Materia -->
      <div class="mb-3">
        <label class="form-label">Materia:</label>
        <select
          formControlName="materiaID"
          class="form-control"
          [ngClass]="{'is-invalid': hasErrors('materiaID', 'required')}"
        >
          <option value="">Seleccione...</option>
          <option *ngFor="let materia of listadoMaterias" [value]="materia.idMateria">
            {{ materia.matNombre }}
          </option>
        </select>

        <div class="invalid-feedback" *ngIf="hasErrors('materiaID', 'required')">
          Seleccione la materia.
        </div>
      </div>

      <!-- Contenido -->
      <div class="mb-3">
        <label class="form-label">Contenido:</label>
        <input
          type="text"
          class="form-control"
          formControlName="libNotaDeContenido"
          placeholder="Escriba la nota de contenido"
          [ngClass]="{'is-invalid': hasErrors('libNotaDeContenido', 'required')}"
        />

        <div class="invalid-feedback" *ngIf="hasErrors('libNotaDeContenido', 'required')">
          Ingrese la nota de contenido.
        </div>
      </div>

      <!-- Botones -->
      <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-success" type="submit" [disabled]="formularioDeLibros.invalid">
          Guardar
        </button>

        <button type="button" class="btn btn-secondary" routerLink="/libros-listar">
          Cancelar
        </button>
      </div>

    </form>
  </div>
</div>
